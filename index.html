<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>XCFit by Shashikant86</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">XCFit</h1>
      <h2 class="project-tagline">Full Stack BDD in Xcode for iOS with Cucumberish, Page Object and Fitnesse</h2>
      <a href="https://github.com/Shashikant86/XCFit" class="btn">View on GitHub</a>
      <a href="https://github.com/Shashikant86/XCFit/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Shashikant86/XCFit/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://travis-ci.org/Shashikant86/XCFit"><img src="http://img.shields.io/travis/Shashikant86/XCFit.svg?style=flat" alt="CI Status"></a>
<a href="http://cocoapods.org/pods/XCFit"><img src="https://img.shields.io/cocoapods/v/XCFit.svg?style=flat" alt="Version"></a>
<a href="http://cocoapods.org/pods/XCFit"><img src="https://img.shields.io/cocoapods/l/XCFit.svg?style=flat" alt="License"></a>
<a href="http://cocoapods.org/pods/XCFit"><img src="https://img.shields.io/cocoapods/p/XCFit.svg?style=flat" alt="Platform"></a></p>

<h1>
<a id="xcfit--full-stack-bdd-in-xcode" class="anchor" href="#xcfit--full-stack-bdd-in-xcode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFit : Full Stack BDD in Xcode</h1>

<p><strong>XCFit a.k.a (<a href="https://developer.apple.com/videos/play/wwdc2015/406/0">XCUI</a>, <a href="https://github.com/Ahmed-Ali/Cucumberish">Cucumberish</a> and <a href="https://github.com/paulstringer/OCSlimProject">Fitnesse</a> Integrations Tests) is a full stack Xcode BDD framework for <a href="https://swift.org">Swift</a> iOS and macOS apps. XCFit allows us to write API level, UI and Acceptance Tests with Swift in human readable language using tools like <a href="https://cucumber.io/">Cucumber</a> and <a href="http://fitnesse.org/">Fitnesse</a> in Xcode. We can still use Apple's brand new UI Testing framework (XCUI) under the hood of Cucumberish. XCFit is fully automated solution for Cucumberish and Fitnesse. You can use 80(Fitnesse):20(Cucumberish) formula to automate Acceptance and UI Testing for better coverage and faster feedback. XCFit is available on <a href="https://rubygems.org/gems/xcfit">RubyGem</a>,  <a href="http://cocoadocs.org/docsets/XCFit">CocoaPods</a> and Swift Package Manager.</strong></p>

<h3>
<a id="xcfit-20-has-just-released-" class="anchor" href="#xcfit-20-has-just-released-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFit 2.0 has just released !</h3>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/XCFit2Release.png" alt="image"></p>

<ul>
<li>
<a href="#xcfit--full-stack-bdd-in-xcode">XCFit : Full Stack BDD in Xcode</a>

<ul>
<li><a href="#xcfit-features">XCFit Features</a></li>
<li><a href="#tech--software-requirements">Tech &amp; Software Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#setup-xcode-templates">Setup Xcode Templates</a></li>
<li><a href="#setting-cucumberish-bdd-scenarios-in-xcode">Setting Cucumberish BDD Scenarios in Xcode</a></li>
<li><a href="#xcui-page-object-pattern">XCUI Page Object Pattern</a></li>
<li><a href="#fitnesse-for-ios-acceptancecontract-tests">Fitnesse for iOS: Acceptance/Contract Tests</a></li>
<li><a href="#continuous-integration--fastlane">Continuous Integration   Fastlane</a></li>
<li><a href="#xcfit-swift-package-manager">XCFit: Swift Package Manager</a></li>
<li><a href="#quick-demo-with-example-app">Quick Demo with Example App</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
<li><a href="#author">Author</a></li>
<li><a href="#todo">TODO</a></li>
<li><a href="#license">LICENSE</a></li>
<li><a href="#contributing">Contributing</a></li>
</ul>
</li>
</ul>

<h1>
<a id="xcfit-features" class="anchor" href="#xcfit-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFit Features</h1>

<hr>

<ul>
<li> You can now write Given When Then (Gherkin) and Decision Table in Xcode. In Short, you can do BDD in Xcode for your iOS app.<br>
</li>
<li> You can now write/Execute all your Acceptance Tests and UI Tests using Apple's brand new programming language "Swift" in Xcode. Goodbye Appium, Calabash, Frank, KIF and Goodbye Ruby,Java, Python. It's pure Swift !!</li>
<li> XCFit provides automated Xcode Target Templates for Cucumberish, Fitnesse and Page Object Pattern(XCUI) targets which reduce hectic Xcode configuration steps. It also arrange code in Xcode groups. All happens in one command</li>
<li>
<p>XCFit will setup test frameworks within a minute and works for Xcode 8 and Xcode 7.  </p>

<h3>
<a id="xcfit-allows-follwing-frameworks" class="anchor" href="#xcfit-allows-follwing-frameworks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFIT allows follwing frameworks</h3>
</li>
<li>
<p><strong>Cucumberish BDD Framework</strong></p>

<p>XCFit setup <a href="https://cucumber.io">Cucumber</a> style BDD framework with "<a href="https://github.com/Ahmed-Ali/Cucumberish">Cucumberish</a> UI Test Bundle' Templates</p>
</li>
<li>
<p><strong>Page Object Pattern for XCUI Test framework from Apple</strong></p>

<p>XCFit setup <a href="http://martinfowler.com/bliki/PageObject.html">Page Object Pattern</a> for Apple's <a href="https://developer.apple.com/videos/play/wwdc2015/406/">XCUI Test</a> using 'XCUI POM Test Bundle' Templates</p>
</li>
<li>
<p><strong>Fitnesse Acceptance Tests for iOS using OCSlim Project</strong></p>

<p>XCFit allows us to setup <a href="http://fitnesse.org/">Fitnesse</a> style decision table test framework with <a href="https://github.com/paulstringer/OCSlimProject">OCSlimProject</a> using 'Acceptance Tests  Bundle' templates.</p>
</li>
</ul>

<h3>
<a id="xcfit-available-on" class="anchor" href="#xcfit-available-on" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFit Available on</h3>

<ul>
<li><p><strong>CocoaPods</strong> -- <a href="http://cocoadocs.org/docsets/XCFit">XCFit-CocoaPods</a> : BDD Style scenarios for iOS App</p></li>
<li><p><strong>RubyGems</strong>  -- <a href="https://rubygems.org/gems/xcfit">xcfit-RubyGem</a> : Automated Xcode Templates</p></li>
<li><p><strong>Swift Package Manager</strong> : 2.0.0 : XCUI Test Framework Helpers</p></li>
</ul>

<h1>
<a id="tech--software-requirements" class="anchor" href="#tech--software-requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tech &amp; Software Requirements</h1>

<p>XCFit uses a number of open source projects to work properly. You need to have following</p>

<p><strong>Hardware</strong></p>

<p>You must have Mac Operating System with OSX/MacOS version &gt; 10.9</p>

<p><strong>Software</strong></p>

<ul>
<li>
<strong><a href="https://www.ruby-lang.org/en/">Ruby</a></strong>

<ul>
<li>Use <a href="https://rvm.io/">RVM</a> for GEM management. Ideally Ruby &gt; 2.X. You can use system Ruby with sudo</li>
</ul>
</li>
<li>
<strong><a href="https://developer.apple.com/xcode/">Xcode8</a></strong>

<ul>
<li>Ideally Xcode 8 but works on Xcode 7 as well.</li>
</ul>
</li>
<li>
<strong><a href="https://rubygems.org/">RubyGems</a></strong>

<ul>
<li>RubyGem with <a href="https://cocoapods.org/">Cocoapods</a> installed</li>
</ul>
</li>
<li>
<strong><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/curl.1.html">Curl on Mac</a></strong>

<ul>
<li>Might be pre-installed but worth double checking.</li>
</ul>
</li>
<li>
<strong><a href="https://www.npmjs.com/package/ios-sim">iOS-Sim</a></strong>

<ul>
<li>Node Package required to launch iOS app for Fitnesse Acceptance tests.</li>
</ul>
</li>
<li>
<a href="https://www.java.com/en/"><strong>Java</strong></a>

<ul>
<li>Java should be installed on Mac, it is required for Fitnesse Acceptance Test</li>
</ul>
</li>
<li>
<strong>Ruby Packages(optional)</strong>

<ul>
<li>Xcpretty, Fastlane(Optional), Rake, Bundler etc</li>
</ul>
</li>
</ul>

<hr>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h1>

<h2>
<a id="install-xcfit-gem" class="anchor" href="#install-xcfit-gem" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install XCFit Gem</h2>

<p>In order to get started, We need to install XCFit from <a href="https://rubygems.org/">RubyGems</a>. This will set our Xcode for BDD</p>

<pre><code>   $ gem install xcfit
</code></pre>

<p>You need to use with 'sudo' if you are using system (pre-installed) Ruby(2.0). XCFit gem will be used to set all the Xcode Templated for Xcode 8 as well Xcode 7</p>

<p>Now that you can execute 'xcfit' command from your terminal/iTerm etc etc. Example Output Looks like this :</p>

<pre><code>$xcfit                                                                  
Tasks:
  xcfit get_cucumberish VERSION  
  xcfit get_fitnesse             
  xcfit help [TASK]             
  xcfit set_xcode7_templates     
  xcfit set_xcode_templates      
</code></pre>

<h2>
<a id="install-xcfit-cocoapod-and-swift-package-covered-later" class="anchor" href="#install-xcfit-cocoapod-and-swift-package-covered-later" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install XCFit Cocoapod and Swift Package (Covered later)</h2>

<p>Later, we need to install <a href="http://cocoadocs.org/docsets/XCFit">XCFit</a> from CocoaPods to enable Cucumberish and Fitnesse test. We can also get XCFit from Swift Package Manager if we need to have additional helpers for the XCUI test framework.</p>

<hr>

<h1>
<a id="setup-xcode-templates" class="anchor" href="#setup-xcode-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup Xcode Templates</h1>

<p>In existing app or brand new app, we have to enable the Xcode templates for targets to speed up the things.</p>

<h5>
<a id="xcode-8" class="anchor" href="#xcode-8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Xcode 8</h5>

<p>To setup Templates for Xcode 8.</p>

<div class="highlight highlight-source-shell"><pre>$ xcfit set_xcode_templates
</pre></div>

<h5>
<a id="xcode-7" class="anchor" href="#xcode-7" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Xcode 7</h5>

<p>To setup Templates for Xcode 7.x.</p>

<div class="highlight highlight-source-shell"><pre>$ xcfit set_xcode7_templates
</pre></div>

<ul>
<li> This will add couple of templates to your Xcode for iOS and macOS apps. In your app if you go to 'File---&gt;New---&gt;Target'</li>
</ul>

<p>You will see new option for iOS i.e 'XCFit'. Once Clicked on it. You will see Cucumberish UI and Fitnesse Acceptance Tests. XCUI POM, Fitnesse Acceptance Unit Test bundles. As shown</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/Xcode8-Templates.png" alt="image"></p>

<hr>

<h1>
<a id="setting-cucumberish-bdd-scenarios-in-xcode" class="anchor" href="#setting-cucumberish-bdd-scenarios-in-xcode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting Cucumberish BDD Scenarios in Xcode</h1>

<h2>
<a id="setup-ios-ui-cucumberish-test-bundle-target" class="anchor" href="#setup-ios-ui-cucumberish-test-bundle-target" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup 'iOS UI Cucumberish Test Bundle' Target</h2>

<ul>
<li><p>From Xcode, create a new app(Or use existing app) and selct File ---&gt; New ----&gt; Target</p></li>
<li><p>Now Select 'XCFit' for iOS app and Click on 'Cucumberish UI Test Bundle'</p></li>
<li><p>Once Clicked on the target e.g 'Cucumberish UI Test Bundle' Xcode will create UI testing target with all the required files with Bridging header for Cucumberish UI Testing. It create Page Object Pattern with all required files with screens, steps definitions and Cucumberish initialiser swift file.</p></li>
</ul>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/XCFit_CucumberishTemplates.gif" alt="image"></p>

<h5>
<a id="whats-in-the-cucumberish-template-" class="anchor" href="#whats-in-the-cucumberish-template-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What's in the Cucumberish Template ?</h5>

<ul>
<li><strong>YOUR_CUCUMBERISH_TARGET.swift</strong></li>
</ul>

<p>This file is at the base of the target. This initiate Cucumberish for project. We need to register all step definitions in this file.</p>

<ul>
<li><strong>Screens</strong></li>
</ul>

<p>This is groups where we can abstract logic of every screen in the app. Example file are 'HomeScreen.swift' and 'BaseScreen.swift'</p>

<ul>
<li><strong>Step_Definitions</strong></li>
</ul>

<p>This groups has all the step definitions related to screen. Example file 'HomeScreenSteps.swift'. Once implemented we need to register it in the initialiser file mentioned above.</p>

<ul>
<li><strong>Common</strong></li>
</ul>

<p>This group has common code like extensions and common steps. The example file 'CommonStepDefinitions.swift' has some steps that can be used in the feature file. It also has 'Hooks.swift' to ad cucumber hooks.</p>

<ul>
<li><strong>Supporting Files</strong></li>
</ul>

<p>This groups all the Objective-C headers and Bridging headers needed to get Cucumberish working with Swift.</p>

<h5>
<a id="whats-not-in-the-cucumberish-template" class="anchor" href="#whats-not-in-the-cucumberish-template" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What's not in the Cucumberish Template</h5>

<ul>
<li><strong>Features Directory</strong></li>
</ul>

<p>We don't have 'Features' directory in the template because it needs to have directory on the disk and should be added to Xcode as 'Folder Reference' not Group.</p>

<ul>
<li><p>Create a Direcory called "Feature"</p></li>
<li><p>Now Add sample Gherkin Feature File to 'Features' directory either by File-&gt;New-&gt;Gherkin Or Just add it using your favourite text editor e.g demo.feature with content</p></li>
</ul>

<pre><code>Feature: Demo App Feature

Scenario: Demo Scenario

Given the app is running

</code></pre>

<ul>
<li><p>Now Drag and Drop 'Features' directory to Xcode Cucumberish target</p></li>
<li><p>Select only '<strong>Create folder references</strong>' Option. ** Do Not Select 'Create groups' Or 'Copy items if needed'**</p></li>
</ul>

<p>Here is how to do it.
<img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/AddFeaturesDirectory.gif" alt="image"></p>

<ul>
<li><strong>Cucumberish Header Files</strong></li>
</ul>

<p>We still don't have content of <a href="https://github.com/Ahmed-Ali/Cucumberish/tree/master/Cucumberish">Cucumberish</a> to be included in our project. </p>

<h3>
<a id="getting-cucumberish-into-our-target" class="anchor" href="#getting-cucumberish-into-our-target" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Cucumberish into our Target</h3>

<p>In order to get <a href="https://github.com/Ahmed-Ali/Cucumberish/tree/master/Cucumberish">Cucumberish</a> source content. There are few ways we can do that </p>

<ul>
<li><strong>Using CocoaPods</strong></li>
</ul>

<p>Create a 'Podfile' if you don't have already. In your Podfile, add following Pod entry and update/install pod</p>

<div class="highlight highlight-source-ruby"><pre>    target <span class="pl-s"><span class="pl-pds">'</span>$_YOUR_CUCUMBERISH_TARGET<span class="pl-pds">'</span></span> <span class="pl-k">do</span>
      pod <span class="pl-s"><span class="pl-pds">'</span>XCFit<span class="pl-pds">'</span></span>
    <span class="pl-k">end</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ pod install</pre></div>

<p>You can do that easily.</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/AddPod.gif" alt="image"></p>

<p>Now close the existing Xcode session and Xcode Workspace next time.</p>

<blockquote>
<p><strong>Note</strong> There is issue with Cocoapods when you have <code>'use_frameworks!'</code>, it will not import header files and build will fail. If you are not using Frameworks in th Podfile then this approach is OK. </p>
</blockquote>

<ul>
<li><strong>Manual Installation</strong></li>
</ul>

<p>We can manually copy content of <a href="https://github.com/Ahmed-Ali/Cucumberish/tree/master/Cucumberish">Cucumberish</a> directory and drag to target as with option "**Create groups" and "Copy items if needed". </p>

<p>Here is how to setup everything in am minute ! </p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/XCFitStartUp.gif" alt="image"></p>

<ul>
<li>
<strong>Using Carthage</strong> </li>
</ul>

<p>Create a <code>Cartfile</code> with following Content </p>

<pre><code>         github "Ahmed-Ali/Cucumberish"
</code></pre>

<p>Now run Carthage wihtout build option. </p>

<pre><code>      $ carthage update --platform iOS --no-build 
</code></pre>

<p>Now in the <code>Carthage/Checkout</code> directory has <code>Cucumberish/Cucumberish</code>. drag to target as with option "<strong>Create groups" and "Copy items if needed</strong>". </p>

<p>Here is how to do that !</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/blob/master/Carthage.gif" alt="image"></p>

<p>Please choose one of the suitable option for you. </p>

<p>We now have everything we needed to run demo Cucumber demo test. Update Scheme if don't want to run unit test or other type of tests.
and press 'CMD+U'</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/CucumberTest.gif" alt="image"></p>

<p>Congratulations !! You have just ran your first Cucumber BDD Scenario in the Xcode. Now add your own :)</p>

<h4>
<a id="create-separate-scheme-if-needed" class="anchor" href="#create-separate-scheme-if-needed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create Separate Scheme if needed</h4>

<p>XCFit adds 'Cucumberish' target to existing Scheme. You can remove that target and run separate scheme to keep it independent from Unit tests. Make sure you make the new scheme executable for Running.</p>

<hr>

<h1>
<a id="xcui-page-object-pattern" class="anchor" href="#xcui-page-object-pattern" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCUI Page Object Pattern</h1>

<p>Now, we have seen that it's failrly easy to setup BDD Style tests with Cucumberish but some people don't want that overhead of adding extra layer of Gherkin. XCFit gives an option to use very polular <a href="http://martinfowler.com/bliki/PageObject.html">Page Object Pattern</a> with Apple's Xcode UI Testing framework.</p>

<h2>
<a id="setup-xcui-pom-test-bundle-target" class="anchor" href="#setup-xcui-pom-test-bundle-target" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup 'XCUI POM Test bundle' Target</h2>

<ul>
<li><p>From Xcode, create a new app(Or use existing app) and selct File ---&gt; New ----&gt; Target</p></li>
<li><p>Now Select 'XCFit' for iOS app and Click on 'XCUI POM Test Bundle'</p></li>
<li><p>Once Clicked on the target e.g 'XCUI POM Test Bundle' Xcode will create UI testing target with properly structured Xcode Groups and required files. You can then make physical directories on Disk Or change the folder/group structure as per your need.</p></li>
<li><p>You don't have to so any setting to run those demo XCUI tests. Just CMD+U and You are good to go !</p></li>
</ul>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/XCUIPOM.gif" alt="image"></p>

<h5>
<a id="whats-in-the-xcui-pom-template-" class="anchor" href="#whats-in-the-xcui-pom-template-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What's in the XCUI POM Template ?</h5>

<ul>
<li><strong>YOUR_CUCUMBERISH_TARGETPageObjectTests.swift</strong></li>
</ul>

<p>This file is at the base of the target. It's exactly same file that Apple's XCUI Test generate at first. You may use it for recording the tests or simply delete it if not needed.</p>

<ul>
<li><strong>Screens</strong></li>
</ul>

<p>This is groups where we can abstract logic of every screen in the app. Example file are 'HomeScreen.swift' and 'BaseScreen.swift' This assumes that your apps is made up of multiple screens. You can write individual screen class which extend BaseScreen. All the functionality related to screen can be included in this class.</p>

<ul>
<li><strong>Sections</strong></li>
</ul>

<p>This group has 'HomeElements.swift' class which stores all the locators of HomeScreen in enums. Sections are defined to store locators of the screen in the form of enums. Here are some samples we can store Images, Buttons and Static Texts of the HomeScreens. We can access those enums from anywhere from the Test methods or page objects.</p>

<ul>
<li><strong>Protocols</strong></li>
</ul>

<p>Swift is protocol oriented language so feel to start with Protocol per screen. This group has 'HomeProtocol.swift' file where there is way to implement protocol oriented testing. Here is example of sample protocol for the homescreen. We can implement this protocol in the XCTest method as needed or we can write some extensions to support Testing.</p>

<ul>
<li><strong>Tests</strong></li>
</ul>

<p>This group has all the test for our app. Currently demo template has two tests 'HomeScreenTest.swift' and 'ProtocolOrientedTest.swift'. This examples shows how XCUI test can be implemented in the Object Orinted way and Protocol oriented way.</p>

<ul>
<li><strong>TestBase</strong></li>
</ul>

<p>Testbase is group where we can abstract all setup, teardown and common stuff in the base class. Every Screen then use this class as base. You can add more stuff as needed e.g Fixtures, Launch Arguments</p>

<hr>

<h1>
<a id="fitnesse-for-ios-acceptancecontract-tests" class="anchor" href="#fitnesse-for-ios-acceptancecontract-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fitnesse for iOS: Acceptance/Contract Tests</h1>

<p><a href="http://fitnesse.org/">Fitnesse</a> is fully integrated standalone wiki and acceptance testing framework for BDD Style testing. As of now we have seen Cucumber and Page Object pattern test frameworks. If you really wanted to get more information about Fitnnese for iOS, please follow documentation on <a href="http://paulstringer.github.io/OCSlimProject/">OCSlim</a> project. XCFit adopted the framework as dependeny to make it full stack BDD. We will cover basic setup as part of this document.</p>

<h2>
<a id="setup-acceptance-test-target-template" class="anchor" href="#setup-acceptance-test-target-template" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup 'Acceptance Test' Target template</h2>

<ul>
<li><p>From Xcode, create a new app(Or use existing app) and selct File ---&gt; New ----&gt; Target</p></li>
<li><p>Now Select 'XCFit' for iOS app and Click on 'iOS Acceptance Tests '</p></li>
<li><p>Once Clicked on the target e.g 'OS Acceptance Tests' Xcode will create new target with all required files and groups for Acceptance testing</p></li>
<li><p>Select 'Acceptance Test' Scheme from Xcode and try to build</p></li>
<li><p>The build will fail as we need fix some <strong>Swift3</strong> related issue as well as we need to add <strong>XCFit/OCSlimProject</strong> Pod to the to the podfile.</p></li>
</ul>

<p>** Watch it so far**</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/AcceptanceTestsTarget.gif" alt="image"></p>

<ol>
<li>To Fix Swift Issue : Just Click on ‘Edit-&gt; Convert-&gt; To Current Swift Syntax</li>
<li>To Fix Pod issue : Add 'XCFit' for AcceptanceTests target</li>
</ol>

<div class="highlight highlight-source-ruby"><pre>    target <span class="pl-s"><span class="pl-pds">'</span>AcceptanceTests<span class="pl-pds">'</span></span> <span class="pl-k">do</span>
      pod <span class="pl-s"><span class="pl-pds">'</span>OCSlimProject<span class="pl-pds">'</span></span>
    <span class="pl-k">end</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ pod install</pre></div>

<p>Now, You should be able to build 'Acceptance Tests" target.</p>

<p>You should also note that, the script 'Launch Fitnesse' has been created in the base of the project. Launch the fitness by exucuting that script from command line</p>

<pre><code>   $ sh Launch Fitnesse
</code></pre>

<p>The browser will popup with example test. You should be able to excute that suite and see then running and passing</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/AcceptanceTestsTargetPod.gif" alt="image"></p>

<p>If you get any errors at this stage, please confirm that you have Java as well as ios-sim node package installed.</p>

<p>So, Congratulations again.. You have just executed Fitnesse test fro browser which is talking to your app.</p>

<h2>
<a id="setting-up-fitnesse-acceptance-target-with-xctest" class="anchor" href="#setting-up-fitnesse-acceptance-target-with-xctest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting up Fitnesse Acceptance Target with XCTest</h2>

<p>You can also setup Fitnesse Acceptance Tests but you need to use Cocoapods for this target.</p>

<p>You can find detailed blog post on <a href="https://dzone.com/articles/integrate-fitnesse-with-xctest-using-xcode8">Dzone</a></p>

<h4>
<a id="add-acceptance-and-acceptance-unit-test-target-to-project" class="anchor" href="#add-acceptance-and-acceptance-unit-test-target-to-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add Acceptance and Acceptance Unit Test Target to Project</h4>

<p>We have all the predefined targets for FitNesse. Just add “Acceptance Tests” target from the template and “AcceptanceUnitTests” target from the bundle. You will need “FitNesse Suite page name” to create this target but just put “OCSlimProjectExamplePage” there for now . Add your ‘AcceptanceTests’ target as a ‘Target Dependancy’ of this new target in Build Phases. This ensures that it the latest code has been built prior to the tests being run.</p>

<h4>
<a id="add-pod-dependencies" class="anchor" href="#add-pod-dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add Pod Dependencies</h4>

<p>We need to create a “Podfile” at the root of the project with the following content.</p>

<div class="highlight highlight-source-ruby"><pre>target <span class="pl-s"><span class="pl-pds">'</span>AcceptanceUnitTests<span class="pl-pds">'</span></span> <span class="pl-k">do     </span>
   pod <span class="pl-s"><span class="pl-pds">'</span>OCSlimProjectTestBundleSupport<span class="pl-pds">'</span></span>
<span class="pl-k">end</span></pre></div>

<p>Now, we can run ‘pod install’ at this stage and close the current Xcode session and open project workspace.</p>

<h4>
<a id="build-acceptance-tests-target" class="anchor" href="#build-acceptance-tests-target" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Build Acceptance Tests Target</h4>

<p>At this stage, we should be able to build the “Acceptance Tests” target. If you are using Xcode8, you might see some warning related to the Swift3 Syntax. Just Click on ‘Edit-&gt; Convert-&gt; To Current Swift Syntax</p>

<p>Now you should be able to build an “Acceptance Tests” target. Once, build is successful, you should see “LaunchFitnesse” script is generated in the root of the project. We can launch and execute the fitness test as shown below.</p>

<h4>
<a id="test-acceptanceunittests-target" class="anchor" href="#test-acceptanceunittests-target" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test AcceptanceUnitTests Target</h4>

<p>Now if you select “AcceptanceUnitTarget” and press CMD+U.</p>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/FitnesseXCTest.gif" alt="image"></p>

<p>Now we can see that FitNesse tests are running as shown above.  We can add this to main scheme to make sure we are running it after the unit tests to follow proper development workflow. We can build and run it as our normal unit tests.</p>

<h1>
<a id="continuous-integration--fastlane" class="anchor" href="#continuous-integration--fastlane" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Continuous Integration + Fastlane</h1>

<p>Now that , we have seen how to run Cucumberish, XCUIPOM, FitNesse acceptance tests from Xcode but it’s a good idea to run it with Fastlane.  We can also take control of version of Cocoapods and Fastlane by using Bundler. Let’s create a Gemfile at the root of the project with the following gem</p>

<div class="highlight highlight-source-ruby"><pre>source <span class="pl-s"><span class="pl-pds">"</span>https://rubygems.org<span class="pl-pds">"</span></span>   
<span class="pl-k">gem</span> <span class="pl-s"><span class="pl-pds">'</span>cocoapods<span class="pl-pds">'</span></span>
<span class="pl-k">gem</span> <span class="pl-s"><span class="pl-pds">'</span>fastlane<span class="pl-pds">'</span></span>   plugins_path <span class="pl-k">=</span> <span class="pl-c1">File</span>.join(<span class="pl-c1">File</span>.dirname(<span class="pl-v">__FILE__</span>), <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Pluginfile<span class="pl-pds">'</span></span>) eval(<span class="pl-c1">File</span>.read(plugins_path), binding) <span class="pl-k">if</span> <span class="pl-c1">File</span>.exist?(plugins_path</pre></div>

<p>Let’s also create directory “fastlane” and make “Fastfile” with following content</p>

<div class="highlight highlight-source-ruby"><pre>
fastlane_version <span class="pl-s"><span class="pl-pds">"</span>1.104.0<span class="pl-pds">"</span></span>  
default_platform <span class="pl-c1">:ios</span>   
platform <span class="pl-c1">:ios</span> <span class="pl-k">do   </span>
before_all <span class="pl-k">do     </span>
   system <span class="pl-s"><span class="pl-pds">"</span>rm -rf ../test_reports/<span class="pl-pds">"</span></span>     
   system <span class="pl-s"><span class="pl-pds">"</span>bundle install<span class="pl-pds">"</span></span>     
   system <span class="pl-s"><span class="pl-pds">"</span>pod install<span class="pl-pds">"</span></span>     
    system <span class="pl-s"><span class="pl-pds">"</span>bundle exec fastlane add_plugin trainer<span class="pl-pds">"</span></span>   
<span class="pl-k">end</span>     
desc <span class="pl-s"><span class="pl-pds">"</span>Runs all the XCUI POM, Cucumberish tests<span class="pl-pds">"</span></span>
  lane <span class="pl-c1">:xcfit_ui_test</span> <span class="pl-k">do</span>
   scan(
   <span class="pl-c1">scheme:</span> <span class="pl-s"><span class="pl-pds">"</span>XCFit2Demo<span class="pl-pds">"</span></span>,
   <span class="pl-c1">destination:</span> <span class="pl-s"><span class="pl-pds">'</span>platform=iOS Simulator,name=iPhone 7 Plus,OS=10.0<span class="pl-pds">'</span></span>,
   <span class="pl-c1">output_directory:</span> <span class="pl-s"><span class="pl-pds">"</span>test_reports/<span class="pl-pds">"</span></span>,
   <span class="pl-c1">output_types:</span> <span class="pl-s"><span class="pl-pds">"</span>html<span class="pl-pds">"</span></span>,
   <span class="pl-c1">fail_build:</span> <span class="pl-c1">false</span>
   )
  <span class="pl-k">end</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>Runs Fitnesse Tests<span class="pl-pds">"</span></span>
  lane <span class="pl-c1">:fitnesse</span> <span class="pl-k">do</span>
   scan(
   <span class="pl-c1">scheme:</span> <span class="pl-s"><span class="pl-pds">"</span>AcceptanceUnitTests<span class="pl-pds">"</span></span>,
   <span class="pl-c1">destination:</span> <span class="pl-s"><span class="pl-pds">'</span>platform=iOS Simulator,name=iPhone 7 Plus,OS=10.0<span class="pl-pds">'</span></span>,
   <span class="pl-c1">output_directory:</span> <span class="pl-s"><span class="pl-pds">"</span>test_reports/<span class="pl-pds">"</span></span>,
   <span class="pl-c1">output_types:</span> <span class="pl-s"><span class="pl-pds">"</span>html<span class="pl-pds">"</span></span>,
   <span class="pl-c1">fail_build:</span> <span class="pl-c1">false</span>
   )
  <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>

<p>After running “bundle install” we should be able to run those test from command line like this :</p>

<pre><code>    $ bundle exec fastlane xcfit_ui_test
</code></pre>

<p><img src="https://raw.githubusercontent.com/Shashikant86/XCFit-GIFS/master/FastlaneXCFit.gif" alt="image"></p>

<p>Once that done. We can have clear HTML reports genearted</p>

<h1>
<a id="xcfit-swift-package-manager" class="anchor" href="#xcfit-swift-package-manager" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XCFit: Swift Package Manager</h1>

<p>XCFit will be having full on support for XCUI Test helpers so that we can use Apple's XCUI Test Framework painless to use. There is <a href="https://github.com/Shashikant86/XCFitDemoSwiftPackage">sample swift package</a> on Github to test XCFit
Full Documetation and API implementation still in progress. You can grab it like this  </p>

<pre><code>import PackageDescription

let package = Package(
    name: "XCFit",
    dependencies: [
  .Package(url: "https://github.com/Shashikant86/XCFit.git", majorVersion: 2),
]
)
</code></pre>

<h1>
<a id="quick-demo-with-example-app" class="anchor" href="#quick-demo-with-example-app" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Demo with Example App</h1>

<p>You can clone the existing repo which has a demo app we can run Unit, Fitnesse and Cucumbertish Tests as XCTest</p>

<pre><code>  $ git clone https://github.com/Shashikant86/XCFit
  $ cd XCFit/XCFit2Demo
  $ open XCFit2Demo.xcworkspace
</code></pre>

<p>Run Unit, Fitnesse and Cucumberish test with Xcode. "cmd + U". We can execute it using Fastlane</p>

<pre><code>  $ bundle install
  $ bundle exec fastlane xcfit_ui_test
</code></pre>

<h1>
<a id="acknowledgements" class="anchor" href="#acknowledgements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Acknowledgements</h1>

<p>Big Thanks to</p>

<ul>
<li>
<a href="https://github.com/Ahmed-Ali/Cucumberish">Cucumberish</a> : Provide native <a href="https://github.com/cucumber/cucumber/wiki/Gherkin">Gherkin</a> parser for iOS Apps to enable BDD in Xcode using Given When Then. Yay!</li>
<li>
<a href="https://github.com/paulstringer/OCSlimProject">OCSlimProject</a> : Provide Xcode Templates to enable BDD with Decision Tables using Fitnesse</li>
</ul>

<h1>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Author</h1>

<p>Shashikant86, <a href="mailto:shashikant.jagtap@icloud.com">shashikant.jagtap@icloud.com</a></p>

<h1>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODO</h1>

<ul>
<li>Add More Step Definitions for Cucumberish Projects</li>
<li>Improve Swift Package with additional XCUI test helpers</li>
<li>Setting up XCFit on Apple's own CI Xcode Server</li>
</ul>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>LICENSE</h1>

<p>Copyright © 2014 Shashikant Jagtap, <a href="http://shashikantjagtap.net">http://shashikantjagtap.net</a></p>

<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

<h1>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h1>

<ol>
<li>Fork it ( <a href="https://github.com/Shashikant86/XCFit/fork">https://github.com/Shashikant86/XCFit/fork</a> )</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Shashikant86/XCFit">XCFit</a> is maintained by <a href="https://github.com/Shashikant86">Shashikant86</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
